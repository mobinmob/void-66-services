[main]
@type = longrun
@version = @VERSION@
@description = "elogind daemon"
@user = ( root )
@options = ( log env )
@extdepends = ( dbus )

[start]
@execute = (
  foreground { execl-toc -n -D -m /sys/fs/cgroup/elogind mount -t cgroup -o none,name=elogind cgroup /sys/fs/cgroup/elogind }
  foreground { execl-toc -n -m /run/systemd mount -t tmpfs -o nosuid,nodev,noexec,mode=0755 none /run/systemd }
  foreground { execl-toc -n -m /run/user mount -t tmpfs -o nosuid,nodev,noexec,mode=0755 none /run/user }
  /usr/libexec/elogind/elogind
)

[stop]
@execute = ( s6-rmrf ${pid_file} )

[environment]
pid_file=!/run/elogind.pid
